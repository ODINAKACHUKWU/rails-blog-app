<%= render partial: 'profile_header' %>
<div class="container-fluid tab">
    <ul class="nav container d-flex flex-row">
        <li class="nav-item">
            <%= link_to "#{@articles.count} Posts", user_profile_path(@user.first_name), class: "nav-link current" %>
        </li>
        <li class="nav-item">
            <%= link_to "#{@followers.count} Followers", user_followers_path(@user.first_name), class: "nav-link text-white" %>
        </li>
        <li class="nav-item">
            <%= link_to "#{@following.count} Following", user_following_path(@user.first_name), class: "nav-link text-white" %>
        </li>
    </ul>
</div>
<div class="container">
  <div class="row py-5 profile-cards">
        <% if @articles.any? %>
            <% @articles.each_slice(3) do |article| %>
                <div class="col-sm-4 mb-4">
                    <%= link_to my_post_path(article[0].slug) do %>
                        <div class="card shadow card-col">
                            <%= image_tag(article[0].image_url.to_s, :alt => "...", :class => "card-img-top", height: "250") %>
                            <div class="card-body">
                            <p class="card-title"><%= sanitize article[0].title %></p>
                            <p class="card-text"><%= sanitize article[0].content.truncate(30) %></p>
                            <p>
                            <small class="text-muted"><%= "#{format_date(article[0].published_at)} #{format_read_time(article[0])}" %></small>
                            </p>
                            </div>
                        </div>
                    <% end %>
                </div>
                <% if article[1] %>
                    <div class="col-sm-4 mb-4">
                        <%= link_to my_post_path(article[1].slug) do %>
                            <div class="card shadow card-col">
                                <%= image_tag(article[1].image_url.to_s, :alt => "...", :class => "card-img-top", height: "250") %>
                                <div class="card-body">
                                <h5 class="card-title"><%= sanitize article[1].title %></h5>
                                <p class="card-text"><%= sanitize article[1].content.truncate(30) %></p>
                                <p>
                                <small class="text-muted"><%= "#{format_date(article[1].published_at)} #{format_read_time(article[1])}" %></small>
                                </p>
                                </div>
                            </div>
                        <% end %>
                    </div>
                <% end %>
                <% if article[2] %>
                    <div class="col-sm-4 mb-4">
                        <%= link_to my_post_path(article[2].slug) do %>
                            <div class="card shadow card-col">
                                <%= image_tag(article[2].image_url.to_s, :alt => "...", :class => "card-img-top", height: "250") %>
                                <div class="card-body">
                                <h5 class="card-title"><%= sanitize article[2].title %></h5>
                                <p class="card-text"><%= sanitize article[2].content.truncate(30) %></p>
                                <p>
                                <small class="text-muted"><%= "#{format_date(article[2].published_at)} #{format_read_time(article[2])}" %></small>
                                </p>
                                </div>
                            </div>
                        <% end %>
                    </div>
                <% end %>
            <% end %>
        <% else %>
            <p class="d-flex justify-content-center font-italic"><%= profile_name(@user) %> has not published any post yet!</p>
        <% end %>
  </div>
</div>
